<template>
	<PopUp>
		<div class="popup-header">
			<div class="popup-logo">
				<svg xmlns="http://www.w3.org/2000/svg" width="66" height="54" viewBox="0 0 66 54" fill="none">
					<g clip-path="url(#clip0_6950_30136)">
						<path d="M6.5712 0.5H0V6.79602H6.5712V0.5Z" fill="#222E27" />
						<path d="M6.5712 8.26611H0V14.5621H6.5712V8.26611Z" fill="#222E27" />
						<path d="M6.5712 16.0596H0V22.3556H6.5712V16.0596Z" fill="#222E27" />
						<path d="M6.5712 23.8257H0V30.1217H6.5712V23.8257Z" fill="#222E27" />
						<path d="M6.5712 31.6196H0V37.9156H6.5712V31.6196Z" fill="#222E27" />
						<path d="M6.5712 39.3857H0V45.6818H6.5712V39.3857Z" fill="#222E27" />
						<path d="M6.5712 47.1792H0V53.4752H6.5712V47.1792Z" fill="#222E27" />
						<path d="M14.9169 0.5H8.3457V6.79602H14.9169V0.5Z" fill="#222E27" />
						<path d="M14.9169 8.26611H8.3457V14.5621H14.9169V8.26611Z" fill="#222E27" />
						<path d="M14.9169 16.0596H8.3457V22.3556H14.9169V16.0596Z" fill="#222E27" />
						<path d="M14.9169 23.8257H8.3457V30.1217H14.9169V23.8257Z" fill="#222E27" />
						<path d="M14.9169 31.6196H8.3457V37.9156H14.9169V31.6196Z" fill="#222E27" />
						<path d="M14.9169 39.3857H8.3457V45.6818H14.9169V39.3857Z" fill="#222E27" />
						<path d="M14.9169 47.1792H8.3457V53.4752H14.9169V47.1792Z" fill="#222E27" />
						<path d="M23.2904 8.26611H16.7192V14.5621H23.2904V8.26611Z" fill="#222E27" />
						<path d="M23.2904 16.0596H16.7192V22.3556H23.2904V16.0596Z" fill="#222E27" />
						<path d="M23.2904 23.8257H16.7192V30.1217H23.2904V23.8257Z" fill="#222E27" />
						<path d="M23.2904 31.6196H16.7192V37.9156H23.2904V31.6196Z" fill="#222E27" />
						<path d="M31.6361 16.0596H25.0649V22.3556H31.6361V16.0596Z" fill="#222E27" />
						<path d="M31.6361 23.8257H25.0649V30.1217H31.6361V23.8257Z" fill="#222E27" />
						<path d="M31.6361 31.6196H25.0649V37.9156H31.6361V31.6196Z" fill="#222E27" />
						<path d="M31.6361 39.3857H25.0649V45.6818H31.6361V39.3857Z" fill="#222E27" />
						<path d="M40.0097 16.0596H33.4385V22.3556H40.0097V16.0596Z" fill="#222E27" />
						<path d="M40.0097 23.8257H33.4385V30.1217H40.0097V23.8257Z" fill="#222E27" />
						<path d="M40.0097 31.6196H33.4385V37.9156H40.0097V31.6196Z" fill="#222E27" />
						<path d="M40.0097 39.3857H33.4385V45.6818H40.0097V39.3857Z" fill="#222E27" />
						<path d="M48.3554 8.26611H41.7842V14.5621H48.3554V8.26611Z" fill="#222E27" />
						<path d="M48.3554 16.0596H41.7842V22.3556H48.3554V16.0596Z" fill="#222E27" />
						<path d="M48.3554 23.8257H41.7842V30.1217H48.3554V23.8257Z" fill="#222E27" />
						<path d="M48.3554 31.6196H41.7842V37.9156H48.3554V31.6196Z" fill="#222E27" />
						<path d="M56.7284 0.5H50.1572V6.79602H56.7284V0.5Z" fill="#222E27" />
						<path d="M56.7284 8.26611H50.1572V14.5621H56.7284V8.26611Z" fill="#222E27" />
						<path d="M56.7284 16.0596H50.1572V22.3556H56.7284V16.0596Z" fill="#222E27" />
						<path d="M56.7284 23.8257H50.1572V30.1217H56.7284V23.8257Z" fill="#222E27" />
						<path d="M56.7284 31.6196H50.1572V37.9156H56.7284V31.6196Z" fill="#222E27" />
						<path d="M56.7284 39.3857H50.1572V45.6818H56.7284V39.3857Z" fill="#222E27" />
						<path d="M56.7284 47.1792H50.1572V53.4752H56.7284V47.1792Z" fill="#222E27" />
						<path d="M65.0741 0.5H58.5029V6.79602H65.0741V0.5Z" fill="#222E27" />
						<path d="M65.0741 8.26611H58.5029V14.5621H65.0741V8.26611Z" fill="#222E27" />
						<path d="M65.0741 16.0596H58.5029V22.3556H65.0741V16.0596Z" fill="#222E27" />
						<path d="M65.0741 23.8257H58.5029V30.1217H65.0741V23.8257Z" fill="#222E27" />
						<path d="M65.0741 31.6196H58.5029V37.9156H65.0741V31.6196Z" fill="#222E27" />
						<path d="M65.0741 39.3857H58.5029V45.6818H65.0741V39.3857Z" fill="#222E27" />
						<path d="M65.0741 47.1792H58.5029V53.4752H65.0741V47.1792Z" fill="#222E27" />
					</g>
					<defs>
						<clipPath id="clip0_6950_30136">
							<rect width="66" height="54" fill="white" />
						</clipPath>
					</defs>
				</svg>
			</div>
			<div class="popup-contact">
				<strong>Zavolejte ještě dnes</strong>
				<a href="tel:+420732264251" class="btn btn-accent"
					><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
						<path
							d="M22.0014 16.9201V19.9201C22.0025 20.1986 21.9455 20.4743 21.8339 20.7294C21.7223 20.9846 21.5587 21.2137 21.3535 21.402C21.1483 21.5902 20.906 21.7336 20.6421 21.8228C20.3783 21.912 20.0988 21.9452 19.8214 21.9201C16.7442 21.5857 13.7884 20.5342 11.1914 18.8501C8.77523 17.3148 6.72673 15.2663 5.1914 12.8501C3.50138 10.2413 2.44964 7.27109 2.1214 4.1801C2.09641 3.90356 2.12927 3.62486 2.2179 3.36172C2.30652 3.09859 2.44897 2.85679 2.63616 2.65172C2.82336 2.44665 3.0512 2.28281 3.30519 2.17062C3.55917 2.05843 3.83374 2.00036 4.1114 2.0001H7.1114C7.5967 1.99532 8.06719 2.16718 8.43516 2.48363C8.80313 2.80008 9.04348 3.23954 9.1114 3.7201C9.23802 4.68016 9.47285 5.62282 9.8114 6.5301C9.94594 6.88802 9.97506 7.27701 9.8953 7.65098C9.81555 8.02494 9.63026 8.36821 9.3614 8.6401L8.0914 9.9101C9.51495 12.4136 11.5879 14.4865 14.0914 15.9101L15.3614 14.6401C15.6333 14.3712 15.9766 14.1859 16.3505 14.1062C16.7245 14.0264 17.1135 14.0556 17.4714 14.1901C18.3787 14.5286 19.3213 14.7635 20.2814 14.8901C20.7672 14.9586 21.2108 15.2033 21.5279 15.5776C21.8451 15.9519 22.0136 16.4297 22.0014 16.9201Z"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round" />
					</svg>
					+420 732 264 251
				</a>
			</div>
		</div>
		<div class="popup-body">
			<div class="popup-body-inner">
				<h3>Získejte PPC AUDIT ZDARMA</h3>
				<div v-if="formSending">Odesílám...</div>
				<div v-else-if="formSent">Formulář byl v pořádku odeslán, naši accounti se Vám co nejdříve ozvou.</div>
				<form v-else @submit.prevent="sendForm">
					<p>
						Vyplňte prosím formulář níže. <br />
						<strong>Ozveme se ještě dnes!</strong>
					</p>
					<div class="form-row">
						<input type="text" name="fullName" placeholder="Jméno a příjmení *" required :ref="form.jmeno" />
					</div>
					<div class="form-row">
						<input type="text" name="phone" placeholder="Vaše telefonní číslo *" required :ref="form.phone" />
					</div>
					<div class="form-row">
						<input type="text" name="email" placeholder="Váš e-mail *" required :ref="form.email" />
					</div>
					<div class="form-row">
						<input type="text" name="web" placeholder="Webové stránky, na které směrují vaše reklamy" :ref="form.web" />
					</div>
					<div class="form-row">
						<select name="platform" :ref="form.platform">
							<option value="" disabled selected>Platforma auditu</option>
							<option value="Google Ads">Google Ads (AdWords)</option>
							<option value="Facebook/Instagram">Facebook/Instagram</option>
							<option value="Amazaon Advertising">Amazon Advertising</option>
							<option value="Shoptet">Shoptet</option>
							<option value="Bing">Bing</option>
							<option value="Sklik">Sklik</option>
							<option value="Jiná">Jiná</option>
						</select>
					</div>
					<div class="form-row">
						<select name="budget" :ref="form.budget">
							<option value="" disabled selected>Aktuální náklady na reklamu / plánovaný rozpočet</option>
							<option value="10.000/20.000">10 000 CZK / 20 000 CZK</option>
							<option value="20.000/50.000">20 000 CZK / 50 000 CZK</option>
							<option value="50.000/100.000">50 000 CZK / 100 000 CZK</option>
							<option value="100.000/200.000">100 000 CZK / 200 000 CZK</option>
							<option value="200.000/500.000">200 000 CZK / 500 000 CZK</option>
						</select>
					</div>
					<div class="form-row">
						<textarea name="message" placeholder="Vaše zpráva..." rows="5" :ref="form.message"></textarea>
					</div>
					<div class="form-row">
						<button class="btn btn-primary" type="submit"><span>Odeslat</span></button>
					</div>
					<div class="consents">Odesláním souhlasíte s <nuxt-link>Podmínkami zpracování osobních údajů</nuxt-link></div>
				</form>
			</div>
		</div>
	</PopUp>
</template>
<script setup>
	const form = {
		jmeno: ref(null),
		email: ref(null),
		phone: ref(null),
		web: ref(null),
		message: ref(null),
		platform: ref(null),
		budget: ref(null),
	}
	const formSending = useState('formSending', () => false)
	const formSent = useState('formSent', () => false)

	const sendForm = async (e) => {
		e.preventDefault()
		try {
			formSending.value = true
			const response = await $fetch(getStrapiURL('/api/ezforms/submit'), {
				method: 'POST',
				body: JSON.stringify({
					formData: {
						jmeno: form.jmeno.value.value,
						email: form.email.value.value,
						phone: form.phone.value.value,
						message: form.message.value.value,
						web: form.web.value.value,
						platform: form.platform.value.value,
						budget: form.budget.value.value,
					},
				}),
			})
			formSending.value = false
			formSent.value = true
		} catch (e) {
			console.log(e)
		}
	}
</script>
<style lang="scss" scoped>
	.popup-header {
		padding: 30px;
		background-color: $color-white;
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 20px;
		@media (max-width: 640px) {
			flex-direction: column;
		}
	}
	.popup-contact {
		display: flex;
		align-items: center;
		gap: 20px;
		@media (max-width: 640px) {
			flex-direction: column;
		}
	}
	.popup-body {
		padding: 70px;
		text-align: center;
		background: url(/ppc/popup-bg.jpg) center center no-repeat;
		background-size: cover;
		color: $color-white;
		h3 {
			margin: 0 0 10px;
			font-size: rem(32);
		}
		form {
			margin-top: 30px;
			button {
				width: 100%;
			}
			.consents {
				font-size: rem(12);
			}
		}
		&-inner {
			max-width: 480px;
			margin: 0 auto;
		}
		@media (max-width: 640px) {
			padding: 20px;
			h3 {
				font-size: rem(22);
			}
		}
	}
</style>
